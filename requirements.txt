======================================================================
                     ROGUELIKE 星际射击游戏 - 需求文档
======================================================================

项目名称: Puppy HWK And His Four Dom Masters - 星际射击
版本: 1.0
开发语言: Rust
图形库: macroquad
开发时间: 2024

======================================================================
1. 项目概述
======================================================================

这是一个基于 Rust 和 macroquad 开发的 2D 星际射击 Roguelike 游戏。
玩家控制飞船在太空中战斗，通过击败敌人获得经验和金币，
选择随机升级来增强战斗能力，最终挑战并击败 Boss。

======================================================================
2. 功能需求
======================================================================

2.1 用户系统
- 用户登录功能
  * 支持用户名和密码输入
  * 测试账号：admin/123456
  * 登录状态显示
  * 未登录用户可直接游玩

2.2 游戏状态管理
- 主菜单界面
- 武器选择界面
- 登录界面
- 战斗界面
- 肉鸽升级选择界面
- 游戏结算界面

2.3 武器系统
- 三种武器类型：
  * 机枪：伤害2，高攻击速度，多发子弹
  * 激光：伤害4，中等攻击速度，穿透能力
  * 霰弹枪：伤害4，中等攻击速度，散射子弹
- 武器强化系统（通过升级提升）

2.4 敌人系统
- 四种敌人类型：
  * 侦察机：血量20，碰撞伤害5
  * 重甲舰：血量30，有多种攻击模式和移动模式
  * 航母：血量100，定期生成侦察机
  * Boss：血量150，复杂攻击模式，两个阶段

2.5 战斗系统
- 玩家自动射击
- WASD 移动控制
- 子弹碰撞检测
- 伤害计算系统
- 暴击系统
- 子弹特效（穿透、反弹、燃烧、爆炸）

2.6 肉鸽升级系统
- 11种不同升级选项
- 四种稀有度：普通、稀有、史诗、传说
- 随机选择机制
- 10秒倒计时自动选择
- 升级效果立即生效

2.7 道具系统
- 血包道具（重甲舰40%掉落率）
- 自动拾取机制

2.8 游戏进度系统
- 经验值和等级系统
- 金币奖励系统
- 敌人击败统计
- 生存时间记录

2.9 游戏结算系统
- 胜利/失败判定
- 详细统计显示：
  * 生存时间
  * 使用武器
  * 最终等级
  * 击败敌人数
  * 造成伤害
  * 获得金币和经验

======================================================================
3. 性能需求
======================================================================

3.1 帧率要求
- 目标帧率：60 FPS
- 最低可接受帧率：30 FPS

3.2 内存要求
- 运行时内存占用：< 100MB
- 纹理资源优化加载

3.3 响应性要求
- 输入延迟：< 16ms
- 碰撞检测：实时响应
- UI 交互：即时反馈

======================================================================
4. 技术需求
======================================================================

4.1 开发环境
- Rust 1.70+
- Cargo 包管理器
- macroquad 0.4+ 图形库

4.2 平台支持
- Windows 10/11
- 分辨率：800x600 固定窗口

4.3 资源要求
- 支持 PNG 格式纹理
- 音频系统（预留接口）
- 配置文件支持

4.4 代码质量要求
- 模块化设计
- 类型安全
- 内存安全（Rust 保证）
- 错误处理机制

======================================================================
5. 用户界面需求
======================================================================

5.1 界面设计
- 简洁直观的操作界面
- 清晰的状态显示
- 实时数据更新
- 视觉反馈效果

5.2 控制方式
- 键盘控制：WASD 移动
- 数字键选择：1-3 选择选项
- ESC 键：返回上级菜单
- 自动射击无需额外操作

5.3 信息显示
- 玩家状态（血量、等级、经验）
- 游戏时间和统计
- 敌人信息和血条
- Boss 专用血条显示

======================================================================
6. 游戏平衡需求
======================================================================

6.1 难度曲线
- 前20秒：仅侦察机
- 20秒后：加入重甲舰
- 40秒后：加入航母
- 180秒后：Boss 出现

6.2 经济平衡
- 侦察机：10金币，20经验
- 重甲舰：20金币，30经验
- 航母：50金币，50经验
- Boss：100金币，0经验

6.3 升级平衡
- 等级经验需求：100 * 当前等级
- 升级效果适中，避免过于强力
- 稀有度影响效果强度

======================================================================
7. 扩展需求（后续版本）
======================================================================

7.1 功能扩展
- 存档系统
- 音效和背景音乐
- 更多武器类型
- 技能树系统
- 多人模式

7.2 内容扩展
- 更多敌人类型
- 新的 Boss
- 不同关卡背景
- 成就系统

======================================================================
8. 测试需求
======================================================================

8.1 功能测试
- 所有游戏状态转换
- 战斗系统完整性
- 升级系统正确性
- 结算数据准确性

8.2 性能测试
- 长时间运行稳定性
- 大量对象时性能表现
- 内存泄漏检测

8.3 用户体验测试
- 操作响应性
- 界面友好性
- 游戏平衡性

